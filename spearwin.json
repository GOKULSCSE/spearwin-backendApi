{
    "info": {
      "name": "SpearWin Authentication API",
      "description": "Complete authentication API collection for SpearWin backend",
      "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
      {
        "key": "baseUrl",
        "value": "http://localhost:5000",
        "type": "string"
      },
      {
        "key": "accessToken",
        "value": "",  
        "type": "string"
      },
      {
        "key": "refreshToken",
        "value": "",
        "type": "string"
      },
      {
        "key": "userId",
        "value": "",
        "type": "string"
      }
    ],
    "item": [
      {
        "name": "Authentication",
        "item": [
          {
            "name": "Candidate Registration",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"candidate@example.com\",\n  \"password\": \"password123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"dateOfBirth\": \"1990-01-01\",\n  \"gender\": \"Male\",\n  \"phone\": \"+1234567890\",\n  \"bio\": \"Experienced software developer\",\n  \"currentTitle\": \"Senior Developer\",\n  \"experienceYears\": 5,\n  \"expectedSalary\": 80000,\n  \"address\": \"123 Main St, City, State\",\n  \"linkedinUrl\": \"https://linkedin.com/in/johndoe\",\n  \"githubUrl\": \"https://github.com/johndoe\",\n  \"portfolioUrl\": \"https://johndoe.dev\",\n  \"cityId\": \"city-uuid-here\",\n  \"isAvailable\": true\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/register/candidate",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "register", "candidate"]
              }
            },
            "response": [
              {
                "name": "Success Response",
                "originalRequest": {
                  "method": "POST",
                  "header": [],
                  "body": {
                    "mode": "raw",
                    "raw": "{\n  \"email\": \"candidate@example.com\",\n  \"password\": \"password123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\"\n}"
                  },
                  "url": {
                    "raw": "{{baseUrl}}/api/auth/register/candidate",
                    "host": ["{{baseUrl}}"],
                    "path": ["api", "auth", "register", "candidate"]
                  }
                },
                "status": "Created",
                "code": 201,
                "_postman_previewlanguage": "json",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "cookie": [],
                "body": "{\n  \"success\": true,\n  \"message\": \"Candidate registered successfully. Please check your email for verification.\",\n  \"data\": {\n    \"user\": {\n      \"id\": \"user-uuid\",\n      \"email\": \"candidate@example.com\",\n      \"role\": \"CANDIDATE\",\n      \"status\": \"PENDING_VERIFICATION\",\n      \"emailVerified\": false,\n      \"phoneVerified\": false,\n      \"profileCompleted\": false,\n      \"twoFactorEnabled\": false,\n      \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n    },\n    \"candidate\": {\n      \"id\": \"candidate-uuid\",\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\",\n      \"isAvailable\": true,\n      \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n    }\n  }\n}"
              }
            ]
          },
          {
            "name": "Company Registration",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"company@example.com\",\n  \"password\": \"password123\",\n  \"name\": \"Tech Corp\",\n  \"description\": \"Leading technology company\",\n  \"website\": \"https://techcorp.com\",\n  \"industry\": \"Technology\",\n  \"foundedYear\": 2010,\n  \"employeeCount\": \"100-500\",\n  \"headquarters\": \"San Francisco, CA\",\n  \"address\": \"456 Tech St, San Francisco, CA\",\n  \"cityId\": \"city-uuid-here\",\n  \"linkedinUrl\": \"https://linkedin.com/company/techcorp\",\n  \"twitterUrl\": \"https://twitter.com/techcorp\",\n  \"facebookUrl\": \"https://facebook.com/techcorp\",\n  \"isVerified\": false,\n  \"isActive\": true\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/register/company",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "register", "company"]
              }
            }
          },
          {
            "name": "Login",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    if (response.data && response.data.accessToken) {",
                    "        pm.collectionVariables.set('accessToken', response.data.accessToken);",
                    "        pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
                    "        pm.collectionVariables.set('userId', response.data.user.id);",
                    "    }",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              }
            ],
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"candidate@example.com\",\n  \"password\": \"password123\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/login",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "login"]
              }
            },
            "response": [
              {
                "name": "Success Response",
                "originalRequest": {
                  "method": "POST",
                  "header": [],
                  "body": {
                    "mode": "raw",
                    "raw": "{\n  \"email\": \"candidate@example.com\",\n  \"password\": \"password123\"\n}"
                  },
                  "url": {
                    "raw": "{{baseUrl}}/api/auth/login",
                    "host": ["{{baseUrl}}"],
                    "path": ["api", "auth", "login"]
                  }
                },
                "status": "OK",
                "code": 200,
                "_postman_previewlanguage": "json",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "cookie": [],
                "body": "{\n  \"success\": true,\n  \"message\": \"Login successful\",\n  \"data\": {\n    \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"user\": {\n      \"id\": \"user-uuid\",\n      \"email\": \"candidate@example.com\",\n      \"role\": \"CANDIDATE\",\n      \"status\": \"ACTIVE\",\n      \"emailVerified\": true,\n      \"phoneVerified\": false,\n      \"profileCompleted\": false,\n      \"twoFactorEnabled\": false,\n      \"lastLoginAt\": \"2024-01-01T00:00:00.000Z\",\n      \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n    }\n  }\n}"
              },
              {
                "name": "2FA Required Response",
                "originalRequest": {
                  "method": "POST",
                  "header": [],
                  "body": {
                    "mode": "raw",
                    "raw": "{\n  \"email\": \"candidate@example.com\",\n  \"password\": \"password123\"\n}"
                  },
                  "url": {
                    "raw": "{{baseUrl}}/api/auth/login",
                    "host": ["{{baseUrl}}"],
                    "path": ["api", "auth", "login"]
                  }
                },
                "status": "OK",
                "code": 200,
                "_postman_previewlanguage": "json",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "cookie": [],
                "body": "{\n  \"success\": false,\n  \"message\": \"2FA verification required\",\n  \"data\": {\n    \"requires2FA\": true,\n    \"userId\": \"user-uuid\",\n    \"twoFactorCode\": \"2fa-code-here\"\n  }\n}"
              }
            ]
          },
          {
            "name": "Logout",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                },
                {
                  "key": "Authorization",
                  "value": "Bearer {{accessToken}}"
                }
              ],
              "url": {
                "raw": "{{baseUrl}}/api/auth/logout",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "logout"]
              }
            }
          },
          {
            "name": "Refresh Token",
            "event": [
              {
                "listen": "test",
                "script": {
                  "exec": [
                    "if (pm.response.code === 200) {",
                    "    const response = pm.response.json();",
                    "    if (response.data) {",
                    "        pm.collectionVariables.set('accessToken', response.data.accessToken);",
                    "        pm.collectionVariables.set('refreshToken', response.data.refreshToken);",
                    "    }",
                    "}"
                  ],
                  "type": "text/javascript"
                }
              }
            ],
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/refresh-token",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "refresh-token"]
              }
            }
          },
          {
            "name": "Forgot Password",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"candidate@example.com\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/forgot-password",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "forgot-password"]
              }
            }
          },
          {
            "name": "Reset Password",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"token\": \"reset-token-from-email\",\n  \"newPassword\": \"newpassword123\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/reset-password",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "reset-password"]
              }
            }
          },
          {
            "name": "Verify Email",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"code\": \"verification-code-from-email\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/verify-email",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "verify-email"]
              }
            }
          },
          {
            "name": "Verify Phone",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"code\": \"phone-verification-code\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/verify-phone",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "verify-phone"]
              }
            }
          },
          {
            "name": "Resend OTP",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"email\": \"candidate@example.com\",\n  \"type\": \"EMAIL_VERIFICATION\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/resend-otp",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "resend-otp"]
              }
            }
          }
        ]
      },
      {
        "name": "Two-Factor Authentication",
        "item": [
          {
            "name": "Enable 2FA",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                },
                {
                  "key": "Authorization",
                  "value": "Bearer {{accessToken}}"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"password\": \"password123\",\n  \"phone\": \"+1234567890\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/2fa/enable",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "2fa", "enable"]
              }
            },
            "response": [
              {
                "name": "Success Response",
                "originalRequest": {
                  "method": "POST",
                  "header": [],
                  "body": {
                    "mode": "raw",
                    "raw": "{\n  \"password\": \"password123\",\n  \"phone\": \"+1234567890\"\n}"
                  },
                  "url": {
                    "raw": "{{baseUrl}}/api/auth/2fa/enable",
                    "host": ["{{baseUrl}}"],
                    "path": ["api", "auth", "2fa", "enable"]
                  }
                },
                "status": "OK",
                "code": 200,
                "_postman_previewlanguage": "json",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "cookie": [],
                "body": "{\n  \"success\": true,\n  \"message\": \"2FA enabled successfully. Please scan the QR code with your authenticator app.\",\n  \"data\": {\n    \"secret\": \"JBSWY3DPEHPK3PXP\",\n    \"qrCode\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...\",\n    \"backupCodes\": [\"ABC123\", \"DEF456\", \"GHI789\", \"JKL012\", \"MNO345\", \"PQR678\", \"STU901\", \"VWX234\", \"YZA567\", \"BCD890\"]\n  }\n}"
              }
            ]
          },
          {
            "name": "Disable 2FA",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                },
                {
                  "key": "Authorization",
                  "value": "Bearer {{accessToken}}"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"password\": \"password123\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/2fa/disable",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "2fa", "disable"]
              }
            }
          },
          {
            "name": "Verify 2FA",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"code\": \"123456\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/2fa/verify",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "2fa", "verify"]
              }
            }
          },
          {
            "name": "Generate Backup Codes",
            "request": {
              "method": "POST",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                },
                {
                  "key": "Authorization",
                  "value": "Bearer {{accessToken}}"
                }
              ],
              "body": {
                "mode": "raw",
                "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"password\": \"password123\"\n}"
              },
              "url": {
                "raw": "{{baseUrl}}/api/auth/2fa/generate-backup-codes",
                "host": ["{{baseUrl}}"],
                "path": ["api", "auth", "2fa", "generate-backup-codes"]
              }
            }
          }
        ]
      }
    ]
  }